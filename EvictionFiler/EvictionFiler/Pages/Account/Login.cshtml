@page "/"
@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers
@model EvictionFiler.Server.Components.Pages.Account.LoginModel
@{
    ViewData["Title"] = "Login - Housing CourtFiler";
}
<head>
    <title>@ViewData["Title"]</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <base href="/" />


    <link rel="stylesheet" href="lib/bootstrap/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="app.css" />
    <ImportMap />
    <link rel="icon" type="image/png" href="favicon.png" />

    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@100;300;400;700;900&display=swap" rel="stylesheet">

     
</head>

   

<style>
    /* ------------------------------
           General Layout and Background
        ---------------------------------*/
    body {
        background-color: #f7f7f7 !important;
        margin: 0 !important;
    }

    /* Centers the login form responsively */
    .login-container {
        width: 100% !important;
        max-width: 655px !important;
        border-radius: 8px;
    }

    .login-logo {
        width: 11.1rem;
    }

    .display-sub {
        font-size: 26px;
        font-style: normal;
        font-weight: 400;
        line-height: normal;
        letter-spacing: -1px;
    }

    .body-medium {
        font-size: 16px !important;
        font-style: normal !important;
        font-weight: 500 !important;
        line-height: 18px !important;
        color: #1F365D !important;
    }
    

    .body-bold {
        font-weight: 700 !important;
        font-size: 14px !important;
        line-height: 1.3 !important;
        text-decoration: underline !important;
        text-decoration-style: solid !important;
        text-decoration-thickness: 1px !important;
        text-underline-offset: 2px !important;
    }

    .title-h4-semi-bold {
        font-weight: 600 !important;
        font-size: 16px !important;
        line-height: 1.5 !important;
        text-align: center !important;
    }

    /* Alert styling */
    .custom-alert {
        max-width: auto !important;
        height: auto !important;
        padding: 8px 12px !important;
        border-radius: 8px !important;
        border: 1px solid red !important;
        background-color: #FFFBFA !important;
        display: flex !important;
        align-items: center !important;
        justify-content: center !important;
        gap: 10px !important;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.075) !important;
    }

    /* Authenticator layout */
    /* . {
        height: 100vh !important;
        display: flex !important;
        align-items: center !important;
        justify-content: center !important;
        padding: 1rem !important;
        overflow: hidden !important;
    } */

    @@media (max-width: 768px) {
        .authenticator-wrapper {
            height: auto !important;
            align-items: flex-start !important;
            overflow: auto !important;
        }
    }

    /* Remove default outline on focus */
    .no-outline:focus {
        outline: none !important;
        box-shadow: none !important; /* Optional: removes Bootstrap's focus shadow */
    }

</style>

<form method="post" id="loginForm">
    @Html.AntiForgeryToken()
    <div class="d-flex flex-column justify-content-center align-items-center vh-100">
        <div class="card p-5 pb-4 shadow mb-0 border-0 login-container" style="background:#fbf5e8;padding-bottom: 48px !important;">
            <div class="text-start mb-3">
                <img src="images/PHOTO-2025-06-18-02-45-29.jpg" class="img-fluid login-logo" alt="Logo" style="width: 150px; position: absolute; top: 0px; left: 20px;" />
            </div>

            <div class="text-start mb-3 display-sub " style="margin-left: 180px !important; margin:-20px; color: #1F365D;">
                Login to your account
            </div>

            @if (ModelState.ErrorCount > 0)
            {
                <div class="custom-alert text-danger">
                    Invalid username or password.
                </div>
            }

            <div class="mb-3 " style="margin-top:@Model.EmailMarginTop; color:#1F365D;">

                <label class="form-label body-medium" asp-for="loginModel.Username" for="emailInput">Username or e-mail <span class="text-danger">*</span></label>
                <input id="emailInput" asp-for="loginModel.Username" class="form-control form-control-lg form-input text-gray-300 no-outline" placeholder="example@gmail.com" autocomplete="username" aria-label="Email" inputmode="email"
                       autocapitalize="off"
                       spellcheck="false" />
                <span asp-validation-for="loginModel.Username" class="text-danger"></span>
                
            </div>

            <div class="mb-3 " style="color: #1F365D;">
                <label class="form-label body-medium" asp-for="loginModel.Password" for="passwordInput">Password <span class="text-danger">*</span></label>
                <input id="passwordInput" asp-for="loginModel.Password" type="password"
                       class="form-control form-control-lg form-input text-gray-300 no-outline"
                           placeholder="Password" autocomplete="current-password"
                           aria-label="Password"
                       autocapitalize="off"
                       spellcheck="false" />
                <span asp-validation-for="loginModel.Password" class="text-danger"></span>
                
            </div>

            <div class="mb-3 text-end">
                <a class="body-bold text-brand-100" style="color: #1F365D;cursor:pointer;">Forgot password?</a>
            </div>

            <div class="d-grid" style="background: #1F365D; border-radius: 7px;">
                
                <button id="loginBtn"
                        type="submit"
                        asp-page-handler="Submit"
                        class="btn bg-brand-100 title-h4-semi-bold text-white d-flex align-items-center justify-content-center gap-2 no-outline">
                    <span id="btnText">Sign in</span>
                    <span id="spinner" class="spinner-border spinner-border-sm d-none"></span>
                </button>
            </div>
        </div>

       

        <div class="mt-3 text-center">
            <div class="body-medium">
                Don't have an account?
                <a style="color: #1F365D;cursor:pointer; font-size:16px;" class="text-brand-100">Sign Up</a>
            </div>
        </div>
    </div>
</form>
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.19.5/jquery.validate.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validation-unobtrusive/4.0.0/jquery.validate.unobtrusive.min.js"></script>

<script>
    let submitted = false;
    document.getElementById("loginForm").addEventListener("submit", function (e) {
        if (submitted) {
            e.preventDefault();
            return false;
        }

        if (!$(this).valid()) {
            e.preventDefault();
            return false;
        }

        submitted = true;

        const btn = document.getElementById("loginBtn");
        const text = document.getElementById("btnText");
        const spinner = document.getElementById("spinner");

        btn.disabled = true;
        text.textContent = "Signing in...";
        spinner.classList.remove("d-none");
    });
</script>
