@using EvictionFiler.Application.DTOs.ClientDto
@inject IJSRuntime JS

<style>
    :root {
        --bs-primary: #1F365D;
        --bs-warning: #D4A844;
        --bs-light: #F7F6F3;
    }

    body {
        background-color: var(--bs-light);
    }

    .offcanvas.show {
        transform: translateX(0%);
    }

    .offcanvas {
        transform: translateX(100%);
        width: 600px !important;
        transition: transform 0.5s ease-in-out;
    }

    .color-text {
        color: var(--bs-primary);
    }

    .form-control::placeholder {
        font-size: 0.9rem;
    }

    .input-group-text {
        background-color: var(--bs-light);
        color: var(--bs-primary);
        font-weight: 500;
    }
</style>

<div class="offcanvas offcanvas-end show border-start shadow bg-white"
     tabindex="-1" id="createClient"
     style="visibility:@(IsVisible ? "visible" : "hidden");"
     aria-labelledby="createUserLabel">

    <div class="offcanvas-header border-bottom">
        <h5 class="offcanvas-title fw-bold color-text" id="createUserLabel">Add New Client</h5>
        <button type="button" class="btn-close" @onclick="Hide" aria-label="Close"></button>
    </div>

    <div class="offcanvas-body">
        <EditForm Model="@createClient" OnValidSubmit="SubmitUser">
            <DataAnnotationsValidator />
            <ValidationSummary />

            <!-- Client Code (max 10 digits) -->
            <div class="row">
                <div class="col-md-6 mb-3">
                <label class="form-label color-text">Client Code</label>
                <InputText class="form-control"
                           maxlength="10"
                           @bind-Value="createClient.ClientCode"
                           placeholder="Enter up to 10 digits" />
                </div>
                <div class="col-md-6 mb-3">
                    <label class="form-label color-text">Name</label>
                    <InputText class="form-control" @bind-Value="createClient.Name" placeholder="Enter Client Name" />
                </div>
            </div>

         
           <!-- Email -->
<div class="mb-3">
    <label class="form-label color-text">Email</label>
    <div class="input-group">
        <span class="input-group-text">@@</span>
        <InputText class="form-control" @bind-Value="createClient.Email" placeholder="Enter Email" />
    </div>
</div>
            <!-- Address Line 1 & 2 -->
            <div class="mb-3">
                <label class="form-label color-text">Address Line 1 </label>
                    <InputText class="form-control" @bind-Value="createClient.Address_1" placeholder="Address Line 1" />
               
            </div>
            <div class="mb-3">
                <label class="form-label color-text">Address Line 2</label>
                <InputText class="form-control" @bind-Value="createClient.Address_2" placeholder="Address Line 2" />
            </div>
            <!-- City & State -->
            <div class="row">
                <div class="col-md-6 mb-3">
                    <label class="form-label color-text">City</label>
                    <InputText class="form-control" @bind-Value="createClient.City" placeholder="City" />
                </div>
                <div class="col-md-6 mb-3">
                    <label class="form-label color-text">State</label>
                    <InputNumber class="form-control" @bind-Value="createClient.State" placeholder="State ID" />
                </div>
            </div>
            <!-- Zipcode & Fax (with Input Group) -->
            <div class="row">
                <div class="col-md-6 mb-3">
                    <label class="form-label color-text">Zip Code</label>
                    <div class="input-group">
                        <span class="input-group-text"><i class="bi bi-geo"></i></span>
                        <InputNumber class="form-control" @bind-Value="createClient.ZipCode" placeholder="Zip" />
                    </div>
                </div>
                <div class="col-md-6 mb-3">
                    <label class="form-label color-text">Fax</label>
                    <div class="input-group">
                        <span class="input-group-text"><i class="bi bi-printer"></i></span>
                        <InputText class="form-control" @bind-Value="createClient.Fax" placeholder="Fax Number" />
                    </div>
                </div>
            </div>

            <!-- Phone & Cell Phone (with Input Group) -->
            <div class="row">
                <div class="col-md-6 mb-3">
                    <label class="form-label color-text">Phone</label>
                    <div class="input-group">
                        <span class="input-group-text"><i class="bi bi-telephone"></i></span>
                        <InputText class="form-control" @bind-Value="createClient.Phone" placeholder="Phone" />
                    </div>
                </div>
                <div class="col-md-6 mb-3">
                    <label class="form-label color-text">Cell Phone</label>
                    <div class="input-group">
                        <span class="input-group-text"><i class="bi bi-phone"></i></span>
                        <InputText class="form-control" @bind-Value="createClient.CellPhone" placeholder="Mobile" />
                    </div>
                </div>
            </div>

            <!-- Submit Button -->
            <div class="d-flex justify-content-end mt-4">
                <button type="submit" class="btn px-4 fw-semibold"
                        style="background-color: var(--bs-primary); color: white; border: none;">
                    Submit
                </button>
            </div>
        </EditForm>
    </div>
</div>


@code {
    [Parameter] public CreateClientDto createClient { get; set; } = new CreateClientDto();
    [Parameter] public EventCallback<CreateClientDto> Submit { get; set; }

    private bool IsVisible { get; set; } = false;

    public void Show(CreateClientDto model)
    {
        createClient = model;
        IsVisible = true;
        StateHasChanged();
    }

    public void Hide()
    {
        IsVisible = false;
        StateHasChanged();
    }

    public async Task SubmitUser()
    {
        await Submit.InvokeAsync(createClient);
        Hide();
    }
}
